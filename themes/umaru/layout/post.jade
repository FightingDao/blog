extends base

mixin post(post)
  article.post
    header.post-header
      h2.post-title= post.title
      .post-meta
        span.post-date= post.date.format(config.date_format)
        span.post-meta-sep -
        span.post-author @#{config.author}
        span.post-meta-sep -
        span.post-count-words null
        |  words
    .post-os. 
      不建议使用 Windows 浏览本站，推荐用 OSX 和移动端网页访问。
    .post-content.markdown-body !{post.content}
    if post.layout === 'post'
      .post-ccby 
        | 本文版权归 EGOIST 所有，转载请遵循 
        a.link(href="https://creativecommons.org/licenses/by-sa/3.0/deed.zh") 署名-相同方式共享 3.0 版本
        |  协议
    if post.layout === 'post'
      .duoshuo.
        <!-- 多说评论框 start -->
        	<div class="ds-thread" data-thread-key="#{page.path}" data-title="#{page.title}" data-url="#{page.permalink}"></div>
        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
        <script type="text/javascript">
        var duoshuoQuery = {short_name:"egoistchelly"};
        	(function() {
        		var ds = document.createElement('script');
        		ds.type = 'text/javascript';ds.async = true;
        		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        		ds.charset = 'UTF-8';
        		(document.getElementsByTagName('head')[0] 
        		 || document.getElementsByTagName('body')[0]).appendChild(ds);
        	})();
        	</script>
        <!-- 多说公共JS代码 end -->


block head
  title #{page.title} - #{config.title}

block meta 
  - var summary = page.excerpt || page.content.substring(0, 100)
  meta(name="description" content=summary)

block page
  +post(page)
